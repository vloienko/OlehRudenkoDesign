(()=>{"use strict";const e=document.querySelector(".menu__icon"),t=document.querySelector(".menu__body");e&&e.addEventListener("click",(function(n){document.body.classList.toggle("_lock"),e.classList.toggle("_active"),t.classList.toggle("_active")}));const n=document.querySelectorAll(".scroll[data-goto]");if(n.length>0){function u(n){const o=n.target;if(o.dataset.goto&&document.querySelector(o.dataset.goto)){const r=document.querySelector(o.dataset.goto).getBoundingClientRect().top+pageYOffset-document.querySelector("header").offsetHeight;e.classList.contains("_active")&&(document.body.classList.remove("_lock"),e.classList.remove("_active"),t.classList.remove("_active")),window.scrollTo({top:r,behavior:"smooth"}),n.preventDefault()}}n.forEach((e=>{e.addEventListener("click",u)}))}const o=document.querySelectorAll(".popup-link"),r=document.querySelector("body"),s=document.querySelectorAll(".lock-padding");let c=!0;if(o.length>0)for(let m=0;m<o.length;m++){const p=o[m];p.addEventListener("click",(function(e){const t=p.getAttribute("href").replace("#","");i(document.getElementById(t)),e.preventDefault()}))}const l=document.querySelectorAll(".close-popup");if(l.length>0)for(let f=0;f<l.length;f++){const g=l[f];g.addEventListener("click",(function(e){a(g.closest(".popup")),e.preventDefault()}))}function i(e){if(e&&c){const t=document.querySelector(".popup.open");t?a(t,!1):function(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";if(s.length>0)for(let t=0;t<s.length;t++)s[t].style.paddingRight=e;r.style.paddingRight=e,r.classList.add("lock"),c=!1,setTimeout((function(){c=!0}),800)}(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||a(e.target.closest(".popup"))}))}}function a(e,t=!0){c&&(e.classList.remove("open"),t&&(setTimeout((function(){if(s.length>0)for(let e=0;e<s.length;e++)s[e].style.paddingRight="0px";r.style.paddingRight="0px",r.classList.remove("lock")}),800),c=!1,setTimeout((function(){c=!0}),800)))}document.addEventListener("keydown",(function(e){27===e.which&&a(document.querySelector(".popup.open"))})),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector),new Swiper(".filter__list",{pagination:{el:".swiper-pagination",clickable:!0},grabCursor:!0,slidesPerView:3,watchOverflow:!0,speed:800,observer:!0,observeParents:!0,observeSlideChildren:!0,breakpoints:{320:{spaceBetween:0,direction:"vertical"},769:{spaceBetween:10},1024:{spaceBetween:37}}}),new Swiper(".clients-reviews",{pagination:{el:".swiper-pagination",clickable:!0},grabCursor:!0,speed:800,observer:!0,observeParents:!0,observeSlideChildren:!0}),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("formReviews");function t(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function n(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}e.addEventListener("submit",(async function(s){s.preventDefault();let c=function(e){let o=0,r=document.querySelectorAll("._req");for(let e=0;e<r.length;e++){const s=r[e];n(s),s.classList.contains("_email")?emailTest(s)&&(t(s),o++):("checkbox"===s.getAttribute("type")&&!1===s.checked||""===s.value)&&(t(s),o++)}return o}(),l=new FormData(e);if(l.append("image",o.files[0]),0===c){e.classList.add("_sending");let t=await fetch("sendmail.php",{method:"POST",body:l});if(t.ok){let n=await t.json();alert(n.message),r.innerHTML="",e.reset(),e.classList.remove("_sending")}else alert("Error"),e.classList.remove("_sending")}else alert("Fill in required fields")}));const o=document.getElementById("formImage"),r=document.getElementById("formPreview");o.addEventListener("change",(()=>{!function(e){if(!["image/jpeg","image/png","image/gif"].includes(e.type))return alert("Only images are allowed."),void(o.value="");var t=new FileReader;t.onload=function(e){r.innerHTML=`<img src="${e.target.result}" alt="Photo">`},t.onerror=function(e){alert("Error")},t.readAsDataURL(e)}(o.files[0])}))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("formRequest");function t(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function n(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function o(e){return!/^\w +([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}e.addEventListener("submit",(async function(c){c.preventDefault();let l=function(e){let r=0,s=document.querySelectorAll("._req");for(let e=0;e<s.length;e++){const c=s[e];n(c),c.classList.contains("_email")?o(c)&&(t(c),r++):("checkbox"===c.getAttribute("type")&&!1===c.checked||""===c.value)&&(t(c),r++)}return r}(),i=new FormData(e);if(i.append("image",r.files[0]),0===l){e.classList.add("_sending");let t=await fetch("sendmail.php",{method:"POST",body:i});if(t.ok){let n=await t.json();alert(n.message),s.innerHTML="",e.reset(),e.classList.remove("_sending")}else alert("Error"),e.classList.remove("_sending")}else alert("Fill in required fields")}));const r=document.getElementById("formImage"),s=document.getElementById("formPreview");r.addEventListener("change",(()=>{uploadFile(r.files[0])}))}));const d=document.querySelector(".lang");if(d){const v=d.querySelector(".lang__current");v.addEventListener("click",(function(e){v.classList.toggle("active"),d.querySelector(".lang__dropdown").classList.toggle("active")}))}if(document.querySelector(".portfolio")){const y=document.querySelectorAll(".filter__btn");y.forEach((function(e){e.addEventListener("click",(function(){let t=e;t.classList.contains("active")||(y.forEach((function(e){e.classList.remove("active")})),t.classList.add("active"))}))})),document.querySelector(".filter__btn").click()}})();