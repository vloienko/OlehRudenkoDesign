(()=>{"use strict";const e=document.querySelector(".menu__icon"),t=document.querySelector(".menu__body");e&&e.addEventListener("click",(function(n){document.body.classList.toggle("_lock"),e.classList.toggle("_active"),t.classList.toggle("_active")}));const n=document.querySelectorAll(".scroll[data-goto]");if(n.length>0){function g(n){const o=n.target;if(o.dataset.goto&&document.querySelector(o.dataset.goto)){const i=document.querySelector(o.dataset.goto).getBoundingClientRect().top+pageYOffset-document.querySelector("header").offsetHeight;e.classList.contains("_active")&&(document.body.classList.remove("_lock"),e.classList.remove("_active"),t.classList.remove("_active")),window.scrollTo({top:i,behavior:"smooth"}),n.preventDefault()}}n.forEach((e=>{e.addEventListener("click",g)}))}const o=document.querySelectorAll(".popup-link"),i=document.querySelector("body"),s=document.querySelectorAll(".lock-padding");let r=!0;if(o.length>0)for(let v=0;v<o.length;v++){const h=o[v];h.addEventListener("click",(function(e){const t=h.getAttribute("href").replace("#","");c(document.getElementById(t)),e.preventDefault()}))}const l=document.querySelectorAll(".close-popup");if(l.length>0)for(let w=0;w<l.length;w++){const L=l[w];L.addEventListener("click",(function(e){a(L.closest(".popup")),e.preventDefault()}))}function c(e){if(e&&r){const t=document.querySelector(".popup.open");t?a(t,!1):function(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";if(s.length>0)for(let t=0;t<s.length;t++)s[t].style.paddingRight=e;i.style.paddingRight=e,i.classList.add("lock"),r=!1,setTimeout((function(){r=!0}),800)}(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||a(e.target.closest(".popup"))}))}}function a(e,t=!0){r&&(e.classList.remove("open"),t&&(setTimeout((function(){if(s.length>0)for(let e=0;e<s.length;e++)s[e].style.paddingRight="0px";i.style.paddingRight="0px",i.classList.remove("lock")}),800),r=!1,setTimeout((function(){r=!0}),800)))}document.addEventListener("keydown",(function(e){27===e.which&&a(document.querySelector(".popup.open"))})),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);const d=document.querySelector(".filter__list");let u;function m(){window.innerWidth<=768&&"false"==d.dataset.mobile&&(d.classList.contains("swiper-initialized")&&u.destroy(),u=new Swiper(d,{pagination:{el:".swiper-pagination",clickable:!0},direction:"vertical",slidesPerView:3,speed:800,grabCursor:!0,watchOverflow:!0,observer:!0,observeParents:!0,observeSlideChildren:!0,320:{spaceBetween:0},768:{spaceBetween:10}}),d.dataset.mobile="true"),window.innerWidth>768&&(d.dataset.mobile="false",d.classList.contains("swiper-initialized")&&u.destroy(),u=new Swiper(d,{pagination:{el:".swiper-pagination",clickable:!0},direction:"horizontal",slidesPerView:3,speed:800,grabCursor:!0,watchOverflow:!0,observer:!0,observeParents:!0,observeSlideChildren:!0,spaceBetween:10,breakpoints:{1024:{spaceBetween:37}}}))}m(),window.addEventListener("resize",(()=>{m()})),new Swiper(".clients-reviews",{pagination:{el:".swiper-pagination",clickable:!0},grabCursor:!0,speed:800,observer:!0,observeParents:!0,observeSlideChildren:!0}),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("formReviews");function t(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function n(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}e.addEventListener("submit",(async function(s){s.preventDefault();let r=function(e){let o=0,i=document.querySelectorAll("._req");for(let e=0;e<i.length;e++){const s=i[e];n(s),s.classList.contains("_email")?emailTest(s)&&(t(s),o++):("checkbox"===s.getAttribute("type")&&!1===s.checked||""===s.value)&&(t(s),o++)}return o}(),l=new FormData(e);if(l.append("image",o.files[0]),0===r){e.classList.add("_sending");let t=await fetch("sendmail.php",{method:"POST",body:l});if(t.ok){let n=await t.json();alert(n.message),i.innerHTML="",e.reset(),e.classList.remove("_sending")}else alert("Error"),e.classList.remove("_sending")}else alert("Fill in required fields")}));const o=document.getElementById("formImage"),i=document.getElementById("formPreview");o.addEventListener("change",(()=>{!function(e){if(!["image/jpeg","image/png","image/gif"].includes(e.type))return alert("Only images are allowed."),void(o.value="");var t=new FileReader;t.onload=function(e){i.innerHTML=`<img src="${e.target.result}" alt="Photo">`},t.onerror=function(e){alert("Error")},t.readAsDataURL(e)}(o.files[0])}))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("formRequest");function t(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function n(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function o(e){return!/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e.value)}e.addEventListener("submit",(async function(r){r.preventDefault();let l=function(e){let i=0,s=document.querySelectorAll("._req");for(let e=0;e<s.length;e++){const r=s[e];n(r),r.classList.contains("_email")?o(r)&&(t(r),i++):("checkbox"===r.getAttribute("type")&&!1===r.checked||""===r.value)&&(t(r),i++)}return i}(),c=new FormData(e);if(c.append("image",i.files[0]),0===l){e.classList.add("_sending");let t=await fetch("sendmail.php",{method:"POST",body:c});if(t.ok){let n=await t.json();alert(n.message),s.innerHTML="",e.reset(),e.classList.remove("_sending")}else alert("Error"),e.classList.remove("_sending")}else alert("Fill in required fields")}));const i=document.getElementById("formImage"),s=document.getElementById("formPreview");i.addEventListener("change",(()=>{uploadFile(i.files[0])}))}));const p=document.querySelectorAll("._anim-items");if(p.length>0){function y(){for(let e=0;e<p.length;e++){const t=p[e],n=t.offsetHeight,o=_(t).top,i=4;let s=window.innerHeight-n/i;n>window.innerHeight&&(s=window.innerHeight-window.innerHeight/i),pageYOffset>o-s&&pageYOffset<o+n?t.classList.add("_active-scroll"):t.classList.contains("_anim-no-hide")||t.classList.remove("_active-scroll")}}function _(e){const t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+o,left:t.left+n}}window.addEventListener("scroll",y),setTimeout((()=>{y()}),300)}const f=document.querySelector(".lang");if(f){const E=f.querySelector(".lang__current");E.addEventListener("click",(function(e){E.classList.toggle("active"),f.querySelector(".lang__dropdown").classList.toggle("active")}))}if(document.querySelector(".portfolio")){const b=document.querySelectorAll(".filter__btn");b.forEach((function(e){e.addEventListener("click",(function(){let t=e;t.classList.contains("active")||(b.forEach((function(e){e.classList.remove("active")})),t.classList.add("active"))}))})),document.querySelector(".filter__btn").click()}})();